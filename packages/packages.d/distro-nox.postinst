#!/bin/sh -e

say() {
	echo "I: $@..."
}

do_postinst() {
	say 'Hacking /etc/inittab for passwdless login'
	# We also set default runlevel to 3
	sed -e 's#^id:[0-6]:initdefault:#id:3:initdefault:#' \
	    -e 's#:/sbin/getty#:/sbin/getty -n -i -l /usr/bin/fll_login#' \
	    -e 's#^\([0-6]\):23:#\1:2345:#' \
		/usr/share/sysvinit/inittab > /etc/inittab
}

case "${1}" in
	postinst)
		do_postinst
		;;
	*)
		echo "Usage: ${0} postinst"
		;;
esac

:
